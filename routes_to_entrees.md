# Line road network to point highway entrance

## On QGIS

1. Open the ```swissTLM3D_TLM_STRASSE``` dataset which contains all the Swiss roads.
2. Create a new dataset which contains only the ```Autobahn``` in ```OBJEKTART``` column from ```swissTLM3D_TLM_STRASSE``` layer.
3. Create a buffer (20 metres) with the ```Autobahn``` layer. Code: ` processing.run("native:buffer", {'INPUT':'/Users/rloup/Desktop/autoroutes/troncons/entrees.shp','DISTANCE':20,'SEGMENTS':5,'END_CAP_STYLE':0,'JOIN_STYLE':0,'MITER_LIMIT':2,'DISSOLVE':False,'SEPARATE_DISJOINT':False,'OUTPUT':'TEMPORARY_OUTPUT'})`
4. Dissolve (regrouper) this buffer and tick the parameter "keep disjointed entities separate" (Garder les entités disjointes séparées). Code: ` processing.run("native:dissolve", {'INPUT':'memory://MultiPolygon?crs=wkt:COMPOUNDCRS["CH1903+ / LV95 + LN02 height",PROJCRS["CH1903+ / LV95",BASEGEOGCRS["CH1903+",DATUM["CH1903+",ELLIPSOID["Bessel 1841",6377397.155,299.1528128,LENGTHUNIT["metre",1]]],PRIMEM["Greenwich",0,ANGLEUNIT["degree",0.0174532925199433]],ID["EPSG",4150]],CONVERSION["Swiss Oblique Mercator 1995",METHOD["Hotine Oblique Mercator (variant B)",ID["EPSG",9815]],PARAMETER["Latitude of projection centre",46.9524055555556,ANGLEUNIT["degree",0.0174532925199433],ID["EPSG",8811]],PARAMETER["Longitude of projection centre",7.43958333333333,ANGLEUNIT["degree",0.0174532925199433],ID["EPSG",8812]],PARAMETER["Azimuth of initial line",90,ANGLEUNIT["degree",0.0174532925199433],ID["EPSG",8813]],PARAMETER["Angle from Rectified to Skew Grid",90,ANGLEUNIT["degree",0.0174532925199433],ID["EPSG",8814]],PARAMETER["Scale factor on initial line",1,SCALEUNIT["unity",1],ID["EPSG",8815]],PARAMETER["Easting at projection centre",2600000,LENGTHUNIT["metre",1],ID["EPSG",8816]],PARAMETER["Northing at projection centre",1200000,LENGTHUNIT["metre",1],ID["EPSG",8817]]],CS[Cartesian,2],AXIS["(E)",east,ORDER[1],LENGTHUNIT["metre",1]],AXIS["(N)",north,ORDER[2],LENGTHUNIT["metre",1]],USAGE[SCOPE["Cadastre, engineering survey, topographic mapping (large and medium scale)."],AREA["Liechtenstein; Switzerland."],BBOX[45.82,5.96,47.81,10.49]],ID["EPSG",2056]],VERTCRS["LN02 height",VDATUM["Landesnivellement 1902"],CS[vertical,1],AXIS["gravity-related height (H)",up,LENGTHUNIT["metre",1]],USAGE[SCOPE["Engineering survey, topographic mapping."],AREA["Liechtenstein; Switzerland."],BBOX[45.82,5.96,47.81,10.49]],ID["EPSG",5728]]]&field=UUID:string(38,0)&field=DATUM_AEND:date(10,0)&field=DATUM_ERST:date(10,0)&field=ERSTELL_J:integer(9,0)&field=ERSTELL_M:integer(9,0)&field=REVISION_J:integer(9,0)&field=REVISION_M:integer(9,0)&field=GRUND_AEND:string(20,0)&field=HERKUNFT:string(20,0)&field=HERKUNFT_J:integer(9,0)&field=HERKUNFT_M:integer(9,0)&field=OBJEKTART:string(50,0)&field=REVISION_Q:string(20,0)&field=KUNSTBAUTE:string(30,0)&field=WANDERWEGE:string(20,0)&field=BEFAHRBARK:string(10,0)&field=EROEFFNUNG:date(10,0)&field=STUFE:string(5,0)&field=RICHTUNGSG:string(10,0)&field=STR_NAME_U:string(38,0)&field=NAME:string(254,0)&field=BELAGSART:string(10,0)&field=KREISEL:string(10,0)&field=VERKEHRSBE:string(50,0)&field=EIGENTUEME:string(50,0)&field=VERKEHRSBD:string(50,0)&field=STRNAME:string(254,0)&uid={4ad05dc1-2cc0-45a7-a54a-8d262f1fcbed}','FIELD':[],'SEPARATE_DISJOINT':True,'OUTPUT':'TEMPORARY_OUTPUT'})`
5. From this layer, add an id with ```@row_number``` with the Field calculator (Calculatrice de champs).
6. Plugin "realcentroid" with dissolve layer
7. Snap geometries (accrocher les géométries à la couche) to the lines layer "entrees" to fix points on lines. Code: ` processing.run("native:snapgeometries", {'INPUT':'/Users/rloup/Desktop/autoroutes/troncons/centre_entrees.shp','REFERENCE_LAYER':'/Users/rloup/Desktop/autoroutes/troncons/entrees.shp','TOLERANCE':20,'BEHAVIOR':0,'OUTPUT':'TEMPORARY_OUTPUT'})`
8. Save this layer, here "centre\_entrees\_corr"